# Загрузчик базы данных студентов

Проект для загрузки данных о студентах и комнатах в базу данных PostgreSQL и выполнения аналитических запросов.

## Требования

- Python 3.7+
- PostgreSQL 10+
- Установленный пакетный менеджер pip

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone <ваш-репозиторий>
   cd StudentDBLoader
   ```

2. Создайте и активируйте виртуальное окружение (рекомендуется):
   ```bash
   python -m venv venv
   .\venv\Scripts\activate  # Для Windows
   source venv/bin/activate  # Для Linux/Mac
   ```

3. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

4. Создайте базу данных PostgreSQL:
   ```sql
   CREATE DATABASE university_db;
   ```

5. При необходимости измените настройки подключения в `main.py`

## Использование

### Основной скрипт

```bash
python main.py --students students.json --rooms rooms.json --format json
```

Параметры:
- `--students` - путь к файлу с данными студентов (обязательный)
- `--rooms` - путь к файлу с данными комнат (обязательный)
- `--format` - формат вывода: `json` или `xml` (по умолчанию: `json`)

### Утилита для выполнения запросов

```bash
python run_queries.py
```

Эта утилита выполняет все запросы и выводит результаты в консоль, а также сохраняет их в файл `query_results.json`.

## Структура проекта

- `main.py` - основной скрипт для загрузки данных
- `db_connector.py` - работа с базой данных
- `data_loader.py` - загрузка данных из JSON
- `query_runner.py` - выполнение аналитических запросов
- `formatters.py` - форматирование вывода
- `run_queries.py` - утилита для выполнения запросов

## Оптимизация запросов

Для ускорения работы запросов добавлены следующие индексы:
- `idx_students_room_id` - для ускорения поиска по ID комнаты
- `idx_students_birthday` - для ускорения расчёта возраста
- `idx_students_sex` - для ускорения поиска по полу

## Лицензия

MIT
